<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
  -->
<htmlform>
    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <script type="text/javascript">
       $(document).ready(function () {
            //Defaults
            jq("#tbl-other-exposure-type").hide();
            jq("#type-assault").hide();
            jq("#tbl-hiv-test-result").hide();
            jq("#row-hiv-test").hide();
            jq("#row-exposure-type").hide();
            jq("#tbl-prc-number").hide();
            jq("#row-tca").hide();


            //Referred by selected
            jq("#other-specify :input[type=checkbox]").change(otherTypeOfExposureSelected);
            jq("#sex-assault-type :input[type=checkbox]").change(sexualTypeOfExposureSelected);
            jq("#hiv-test-result :input[type=radio]").change(unknownHIVTestSelected);
            jq("#visit-number select").change(onSelectInitialVisit);
          });


         var onSelectInitialVisit = function () {
            var val = jq(this).val();
            if (val == 162080 ){
                jq("#row-hiv-test").show();
                jq("#row-exposure-type").show();
                jq("#row-tca").show();
            }else if(val == 1722 ){
                jq("#row-tca").show();
            }else if(val == 165307 ){
                jq("#row-tca").show();
            }else if(val == 1721 ){
                jq("#row-tca").show();
            }
            else {
                jq("#row-hiv-test").hide();
                clearHiddenSections(jq("#row-hiv-test"));

                jq("#row-exposure-type").hide();
                clearHiddenSections(jq("#row-exposure-type"));

                jq("#row-tca").hide();
                clearHiddenSections(jq("#row-tca"));
            }
        };
         var unknownHIVTestSelected = function () {
            var val = jq(this).val();
            if (val == 1067 ){
                jq("#tbl-hiv-test-result").show();
            }else {
                jq("#tbl-hiv-test-result").hide();
                clearHiddenSections(jq("#tbl-hiv-test-result"));
            }
        };
        var otherTypeOfExposureSelected = function () {
            var val = jq(this).val();
            if (val == 5622 ){
                jq("#tbl-other-exposure-type").show();
            }else {
                jq("#tbl-other-exposure-type").hide();
                clearHiddenSections(jq("#tbl-other-exposure-type"));
            }
        };
          var sexualTypeOfExposureSelected = function () {
            var val = jq(this).val();
            if (val == 167085 ){
                jq("#type-assault").show();
            }else {
                jq("#type-assault").hide();
                clearHiddenSections(jq("#type-assault"));
            }
        };


        //Clear hidden sections
        clearHiddenSections = function(parentObj) {
            parentObj.find('input[type=radio]').each(function() {
                this.checked = false;
            });
            parentObj.find('input[type=checkbox]').each(function() {
                this.checked = false;
            });
            parentObj.find('input[type=text]').each(function() {
                jq(this).val("");
            });
            parentObj.find('select').each(function() {
                this.selectedIndex =0;
            });
        }
    </script>
    <ifMode mode="EDIT">
        <script type="text/javascript">
     $(document).ready(function () {
            //Defaults
            jq("#tbl-other-exposure-type").hide();
            jq("#type-assault").hide();
            jq("#tbl-hiv-test-result").hide();
            jq("#row-hiv-test").hide();
            jq("#row-exposure-type").hide();
            jq("#tbl-prc-number").hide();
            jq("#row-tca").hide();


            //Referred by selected
            jq("#other-specify :input[type=checkbox]").change(otherTypeOfExposureSelected);
            jq("#sex-assault-type :input[type=checkbox]").change(sexualTypeOfExposureSelected);
            jq("#hiv-test-result :input[type=radio]").change(unknownHIVTestSelected);
            jq("#visit-number select").change(onSelectInitialVisit);
          });


         var onSelectInitialVisit = function () {
            var val = jq(this).val();
            if (val == 162080 ){
                jq("#row-hiv-test").show();
                jq("#row-exposure-type").show();
                jq("#row-tca").show();
            }else if(val == 1722 ){
                jq("#row-tca").show();
            }else if(val == 165307 ){
                jq("#row-tca").show();
            }else if(val == 1721 ){
                jq("#row-tca").show();
            }else {
                jq("#row-hiv-test").hide();
                clearHiddenSections(jq("#row-hiv-test"));

                jq("#row-exposure-type").hide();
                clearHiddenSections(jq("#row-exposure-type"));

                jq("#row-tca").hide();
                clearHiddenSections(jq("#row-tca"));
            }
        };


         var unknownHIVTestSelected = function () {
            var val = jq(this).val();
            if (val == 1067 ){
                jq("#tbl-hiv-test-result").show();
            }else {
                jq("#tbl-hiv-test-result").hide();
                clearHiddenSections(jq("#tbl-hiv-test-result"));
            }
        };
        var otherTypeOfExposureSelected = function () {
            var val = jq(this).val();
            if (val == 5622 ){
                jq("#tbl-other-exposure-type").show();
            }else {
                jq("#tbl-other-exposure-type").hide();
                clearHiddenSections(jq("#tbl-other-exposure-type"));
            }
        };
          var sexualTypeOfExposureSelected = function () {
            var val = jq(this).val();
            if (val == 167085 ){
                jq("#type-assault").show();
            }else {
                jq("#type-assault").hide();
                clearHiddenSections(jq("#type-assault"));
            }
        };

     </script>
    </ifMode>
    <style>
        .simple-table {
        border: solid 1px #DDEEEE;
        border-collapse: collapse;
        border-spacing: 0;
        font: normal 13px Arial, sans-serif;
        }

        .simple-table thead th {
        background-color: #DDEFEF;
        border: solid 1px #DDEEEE;
        color: #336B6B;
        padding: 10px;
        text-align: left;
        text-shadow: 1px 1px 1px #fff;
        }

        .simple-table td {
        border: solid 1px #DDEEEE;
        color: #333;
        padding: 10px;
        text-shadow: 1px 1px 1px #fff;
        }
    </style>

    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Encounter Date <encounterDate id="encounter-date" showTime="true" /></td>
                <td>Encounter provider <encounterProvider default="currentUser" role="Provider"/></td>
                <td>Location <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete" /></td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">
        <fieldset class="adherence-screening">
            <legend>
                <strong>Visit Details</strong>
            </legend>
            <table class="simple-table" id="Checklist-tbl1">
                <tr>
                    <td>Visit number</td>
                    <td><obs conceptId="1724"
                                      answerLabels="Initial visit,Week-2 visit,Week-4 visit,Week-6 visit,week-12 visit"
                                      answerConceptIds="162080,1722,165307,1721,1723"
                                      style="dropdown"
                                      id="visit-number"
                                      required="true"/>
                    </td>
                   <!--<td>
                        <table id="tbl-prc-number">
                            <tr>
                                <td>PRC Number <strong>(format:PRC#-10-2022-00001 )</strong></td>
                                <td><obs  id="prc-number" conceptId="1646" size="30"/></td>
                            </tr>
                        </table>
                    </td>-->

                </tr>
                <tr id="row-exposure-type">
                    <td>Form of Sexual Gender Based Violence:</td>
                    <td>
                        <obs  conceptId="167165" answerConceptId="126582" answerLabels="Sexual Assault" style="checkbox"/><br/>
                        <obs  conceptId="167165" answerConceptId="111505" answerLabels="Attempted Rape" style="checkbox"/><br/>
                        <obs  conceptId="167165" answerConceptId="127910" answerLabels="Rape" style="checkbox"/><br/>
                        <obs  conceptId="167165" answerConceptId="159889" answerLabels="Attempted Defilement" style="checkbox"/><br/>
                        <obs  conceptId="167165" answerConceptId="145691" answerLabels="Defilement" style="checkbox"/><br/>
                        <obs  conceptId="167165" answerConceptId="118935" answerLabels="FGM" style="checkbox"/><br/>
                        <obs  conceptId="167165" answerConceptId="5622" answerLabels="Other (specify)" id="other-specify" style="checkbox"/><br/>
                    </td>
                    <td>
                        <table id="tbl-other-exposure-type">
                            <tr>
                                <td>Specify type of SGBV</td>
                                <td><obs conceptId="160716" style="textarea" id="specify-exposure" rows="3" cols="40"/></td>
                            </tr>
                        </table>
                    </td>
                    <!-- 
                            <td>Type of Assault</td>
                            <td>
                                <obs conceptId="123160" answerLabel="Oral" answerConceptId="166060" style="checkbox"/> <br/>
                                <obs conceptId="123160" answerLabel="Vaginal" answerConceptId="123385" style="checkbox"/><br/>
                                <obs conceptId="123160" answerLabel="Anal" answerConceptId="148895" style="checkbox"/><br/>
                                <obs conceptId="123160" answerLabel="Other (specify)" answerConceptId="5622" id="type-assault-select" style="checkbox"/>
                            </td>
                            <td>
                                <table id="tbl-assault-other">
                                    <tr>
                                        <td>Specify other Assault &nbsp;<obs conceptId="164879" style="textarea" id="specify-assault" rows="3" cols="40" /></td>
                                    </tr>
                                </table>
                            </td>
                        -->
                        <td> Please indicate if the survivor is disabled</td><td>
                            <obs conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="120291AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabel="Hearing impairment" style="checkbox" /><br/>
                            <obs conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="147215AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabel="Visual impairment" style="checkbox" /><br/>
                            <obs conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="151342AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabel="Mentally Challenged" style="checkbox"  /><br/>
                            <obs conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="164538AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabel="Physically Challenged" style="checkbox" /><br/>
                            <obs conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabel="Other" style="checkbox" id="has-other-disability"  /><br/>
                            <obs conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1066"
                                answerLabel="Not Disable" style="checkbox" id=""  /><br/>
                        </td>
                        <td>
                             <table id="tbl-other-disability">
                                <tr>
                                    <td>  &#160;&#160;&#160; Specify :
                                        <obs id="other-disability" conceptId="162725" />
                                        &#160;&#160;&#160;
                                    </td>
                                </tr>
                            </table>
                        </td>
                        
                        <includeIf velocityTest="$patient.age &lt; 19">
                            <td>Is the survivor an Orphan Vulnerable Child (OVC)? &nbsp; <obs conceptId="1784"
                                answerLabels="Yes,No,Unknown"
                                answerConceptIds="1065,1066,1067"
                                style="radio"
                                id="patientOVC"
                                required="false"/>
                            </td>
                        </includeIf>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend><strong>Presenting and Emerging Issues</strong></legend>
            <table class="simple-table" id="Checklist-tbl">
                <tr>
                    <td><strong>Presenting Issues</strong></td>
                    <td><obs required="true" conceptId="160632"  rows="4" cols="40" style="textarea" /></td>
                </tr>
                <tr id="row-hiv-test">
                    <td>HIV Test Results</td>
                    <td><obs id="hiv-test-result" conceptId="159427" answerLabels="Non Reactive,Reactive,Unknown" answerConceptIds="664,703,1067" style="radio" /></td>
                    <td>
                        <table id="tbl-hiv-test-result">
                            <tr>
                                <td>Why HIV test unknown?</td>
                                <td><obs conceptId="162169" style="textarea" rows="3" cols="40"/></td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td><strong>Emerging Issues</strong></td>
                    <td><obs conceptId="161011" rows="4" cols="40" id="emerging-issue"/></td>
                </tr>
                <tr>
                    <td><strong>Plan of Action</strong></td>
                    <td><obs conceptId="163104" rows="4" cols="40" style="textarea" id="action-plan"/></td>
                </tr>
                <tr id="row-tca">
                    <td>TCA</td>
                    <td><obs conceptId="5096" allowFutureDates="true" size="50" /></td>
                </tr>
            </table>
        </fieldset>
    </div>
    <div class="ke-form-footer">
        <submit />
    </div>

</htmlform>